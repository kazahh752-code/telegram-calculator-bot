"""
–ë–æ—Ç "–°–ª–æ–≤–æ –¥–Ω—è - –†—É—Å—Å–∫–∏–π –∂–µ—Å—Ç–æ–≤—ã–π —è–∑—ã–∫"
–ù–∞ –æ—Å–Ω–æ–≤–µ —É—á–µ–±–Ω–∏–∫–æ–≤ –ò.–§. –ì–µ–π–ª—å–º–∞–Ω, –ê.–ï. –•–∞—Ä–ª–∞–º–µ–Ω–∫–æ–≤–∞
"""

import os
import logging
import random
from datetime import datetime
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, MessageHandler, filters, ContextTypes

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(
    format='%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    level=logging.INFO
)
logger = logging.getLogger(__name__)

TOKEN = os.environ.get('BOT_TOKEN')

if not TOKEN:
    logger.error("‚ùå BOT_TOKEN not found!")
    exit(1)


# === –ë–ê–ó–ê –ñ–ï–°–¢–û–í –†–ñ–Ø ===

GESTURES_DB = {
    "–ø—Ä–∏–≤–µ—Ç": {
        "gesture_name": "–†—É–∫–∞ –≤–≤–µ—Ä—Ö —Å –º–∞—Ö–æ–º",
        "main_meaning": "–ü–†–ò–í–ï–¢",
        "alternative_meanings": [
            {
                "word": "–ó–î–†–ê–í–°–¢–í–£–ô",
                "context": "–§–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ",
                "example": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, –∫–∞–∫ –¥–µ–ª–∞?",
                "difference": "–ë–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ"
            },
            {
                "word": "–ü–†–ò–í–ï–¢–°–¢–í–£–Æ",
                "context": "–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ",
                "example": "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –≤–∞—Å!",
                "difference": "–†—É–∫–∞ –≤—ã—à–µ, –¥–≤–∏–∂–µ–Ω–∏–µ —á–µ—Ç—á–µ"
            },
            {
                "word": "–°–ê–õ–Æ–¢",
                "context": "–ù–µ—Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ, –º–æ–ª–æ–¥—ë–∂–Ω–æ–µ",
                "example": "–°–∞–ª—é—Ç, –¥—Ä—É–∑—å—è!",
                "difference": "–ë—ã—Å—Ç—Ä–æ–µ, —ç–Ω–µ—Ä–≥–∏—á–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ"
            }
        ],
        "description": "–ü–æ–¥–Ω–∏–º–∏—Ç–µ –ø—Ä–∞–≤—É—é —Ä—É–∫—É –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –≥–æ–ª–æ–≤—ã –ª–∞–¥–æ–Ω—å—é –≤–ø–µ—Ä—ë–¥. –ü–æ–º–∞—à–∏—Ç–µ –∫–∏—Å—Ç—å—é –∏–∑ —Å—Ç–æ—Ä–æ–Ω—ã –≤ —Å—Ç–æ—Ä–æ–Ω—É 2-3 —Ä–∞–∑–∞. –î–≤–∏–∂–µ–Ω–∏–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ, –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–µ.",
        "examples": [
            "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
            "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, —Ä–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å!",
            "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é –≤–∞—Å –Ω–∞ –≤—Å—Ç—Ä–µ—á–µ!"
        ],
        "category": "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è",
        "difficulty": "–õ—ë–≥–∫–∏–π",
        "tips": "–£–ª—ã–±–∞–π—Ç–µ—Å—å! –ó—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç –≤–∞–∂–µ–Ω. –ú–∞—Ö–∏ –Ω–µ —Å–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–∏–µ.",
        "common_mistakes": "–ù–µ –º–∞—à–∏—Ç–µ –≤—Å–µ–π —Ä—É–∫–æ–π –æ—Ç –ø–ª–µ—á–∞ ‚Äî —Ç–æ–ª—å–∫–æ –∫–∏—Å—Ç—å!",
        "gif_path": None  # –î–ª—è –±—É–¥—É—â–∏—Ö GIF
    },
    
    "—Å–ø–∞—Å–∏–±–æ": {
        "gesture_name": "–†—É–∫–∞ –æ—Ç —Å–µ—Ä–¥—Ü–∞ –≤–ø–µ—Ä—ë–¥",
        "main_meaning": "–°–ü–ê–°–ò–ë–û",
        "alternative_meanings": [
            {
                "word": "–ë–õ–ê–ì–û–î–ê–†–Æ",
                "context": "–ë–æ–ª–µ–µ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ–µ",
                "example": "–ë–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ –ø–æ–º–æ—â—å",
                "difference": "–†—É–∫–∞ –¥–æ–ª—å—à–µ —É —Å–µ—Ä–¥—Ü–∞, –∑–∞—Ç–µ–º –ø–ª–∞–≤–Ω–æ –≤–ø–µ—Ä—ë–¥"
            },
            {
                "word": "–ë–õ–ê–ì–û–î–ê–†–ù–û–°–¢–¨",
                "context": "–°—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ–µ",
                "example": "–í—ã—Ä–∞–∂–∞—é –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å",
                "difference": "–û–±–µ —Ä—É–∫–∏ –∫ —Å–µ—Ä–¥—Ü—É, –∑–∞—Ç–µ–º –≤–ø–µ—Ä—ë–¥"
            },
            {
                "word": "–ü–†–ò–ó–ù–ê–¢–ï–õ–¨–ù–û–°–¢–¨",
                "context": "–ì–ª—É–±–æ–∫–∞—è –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å",
                "example": "–Ø –≤–∞–º –æ—á–µ–Ω—å –ø—Ä–∏–∑–Ω–∞—Ç–µ–ª–µ–Ω",
                "difference": "–î–≤–∏–∂–µ–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —Å –Ω–∞–∫–ª–æ–Ω–æ–º –≥–æ–ª–æ–≤—ã"
            }
        ],
        "description": "–ü—Ä–∞–≤—É—é —Ä—É–∫—É –ø—Ä–∏–∂–º–∏—Ç–µ –∫ –≥—Ä—É–¥–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ —Å–µ—Ä–¥—Ü–∞ (–ø–∞–ª—å—Ü—ã –≤–º–µ—Å—Ç–µ, –ª–∞–¥–æ–Ω—å –∫ —Å–µ–±–µ). –ó–∞—Ç–µ–º –ø–ª–∞–≤–Ω–æ –≤—ã–≤–µ–¥–∏—Ç–µ —Ä—É–∫—É –≤–ø–µ—Ä—ë–¥, —Ä–∞—Å–∫—Ä—ã–≤–∞—è –ª–∞–¥–æ–Ω—å –≤–≤–µ—Ä—Ö, –∫–∞–∫ –±—ã –æ—Ç–¥–∞–≤–∞—è –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –æ—Ç —Å–µ—Ä–¥—Ü–∞.",
        "examples": [
            "–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–º–æ—â—å!",
            "–ë–ª–∞–≥–æ–¥–∞—Ä—é –≤–∞—Å!",
            "–°–ø–∞—Å–∏–±–æ, –æ—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω–æ!"
        ],
        "category": "–í–µ–∂–ª–∏–≤–æ—Å—Ç—å",
        "difficulty": "–õ—ë–≥–∫–∏–π",
        "tips": "–î–≤–∏–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏—Å–∫—Ä–µ–Ω–Ω–∏–º, –æ—Ç —Å–µ—Ä–¥—Ü–∞. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª—ë–≥–∫–∏–π –ø–æ–∫–ª–æ–Ω –≥–æ–ª–æ–≤–æ–π.",
        "common_mistakes": "–ù–µ –¥–µ–ª–∞–π—Ç–µ —Ä–µ–∑–∫–æ ‚Äî –¥–≤–∏–∂–µ–Ω–∏–µ –ø–ª–∞–≤–Ω–æ–µ –∏ –¥—É—à–µ–≤–Ω–æ–µ.",
        "gif_path": None
    },
    
    "–ø–æ–∂–∞–ª—É–π—Å—Ç–∞": {
        "gesture_name": "–û—Ç–∫—Ä—ã—Ç–∞—è –ª–∞–¥–æ–Ω—å –≤–ø–µ—Ä—ë–¥",
        "main_meaning": "–ü–û–ñ–ê–õ–£–ô–°–¢–ê",
        "alternative_meanings": [
            {
                "word": "–ü–†–û–®–£",
                "context": "–í–µ–∂–ª–∏–≤–∞—è –ø—Ä–æ—Å—å–±–∞",
                "example": "–ü—Ä–æ—à—É –≤–∞—Å –ø–æ–º–æ—á—å",
                "difference": "–õ–∞–¥–æ–Ω—å —á—É—Ç—å –Ω–∞–∫–ª–æ–Ω–µ–Ω–∞ –∫ —Å–æ–±–µ"
            },
            {
                "word": "–£–ì–û–©–ê–ô–¢–ï–°–¨",
                "context": "–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ",
                "example": "–£–≥–æ—â–∞–π—Ç–µ—Å—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞",
                "difference": "–î–≤–∏–∂–µ–Ω–∏–µ –ª–∞–¥–æ–Ω–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—É —É–≥–æ—â–µ–Ω–∏—è"
            },
            {
                "word": "–ù–ï –ó–ê –ß–¢–û",
                "context": "–û—Ç–≤–µ—Ç –Ω–∞ —Å–ø–∞—Å–∏–±–æ",
                "example": "–ù–µ –∑–∞ —á—Ç–æ, –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å!",
                "difference": "–õ–µ–≥–∫–æ–µ –ø–æ–∫–∞—á–∏–≤–∞–Ω–∏–µ –ª–∞–¥–æ–Ω–∏"
            }
        ],
        "description": "–í—ã—Ç—è–Ω–∏—Ç–µ –ø—Ä–∞–≤—É—é —Ä—É–∫—É –≤–ø–µ—Ä—ë–¥ –ª–∞–¥–æ–Ω—å—é –≤–≤–µ—Ä—Ö, –ø–∞–ª—å—Ü—ã –≤–º–µ—Å—Ç–µ. –°–¥–µ–ª–∞–π—Ç–µ –ø–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–≥–ª–∞—à–∞—é—â–µ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –∫ —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫—É –∏–ª–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—É –ø—Ä–µ–¥–º–µ—Ç–∞.",
        "examples": [
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ—Ö–æ–¥–∏—Ç–µ",
            "–ü—Ä–æ—à—É –≤–∞—Å",
            "–ù–µ –∑–∞ —á—Ç–æ!"
        ],
        "category": "–í–µ–∂–ª–∏–≤–æ—Å—Ç—å",
        "difficulty": "–õ—ë–≥–∫–∏–π",
        "tips": "–ñ–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏ –ø—Ä–∏–≥–ª–∞—à–∞—é—â–∏–º. –£–ª—ã–±–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞!",
        "common_mistakes": "–ù–µ –¥–µ—Ä–∂–∏—Ç–µ –ª–∞–¥–æ–Ω—å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ ‚Äî —Ç–æ–ª—å–∫–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –∏–ª–∏ —á—É—Ç—å –≤–≤–µ—Ä—Ö.",
        "gif_path": None
    },
    
    "–¥–∞": {
        "gesture_name": "–ö–∏–≤–æ–∫ –≥–æ–ª–æ–≤–æ–π",
        "main_meaning": "–î–ê",
        "alternative_meanings": [
            {
                "word": "–°–û–ì–õ–ê–°–ï–ù",
                "context": "–í—ã—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏—è",
                "example": "–Ø —Å–æ–≥–ª–∞—Å–µ–Ω —Å –≤–∞–º–∏",
                "difference": "–ë–æ–ª–µ–µ —ç–Ω–µ—Ä–≥–∏—á–Ω—ã–π –∫–∏–≤–æ–∫"
            },
            {
                "word": "–ü–†–ê–í–ò–õ–¨–ù–û",
                "context": "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—Ä–∞–≤–æ—Ç—ã",
                "example": "–ü—Ä–∞–≤–∏–ª—å–Ω–æ, –∏–º–µ–Ω–Ω–æ —Ç–∞–∫!",
                "difference": "–ö–∏–≤–æ–∫ + —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–ª–µ—Ü –≤–≤–µ—Ä—Ö"
            },
            {
                "word": "–ö–û–ù–ï–ß–ù–û",
                "context": "–£–≤–µ—Ä–µ–Ω–Ω–æ–µ —Å–æ–≥–ª–∞—Å–∏–µ",
                "example": "–ö–æ–Ω–µ—á–Ω–æ, –ø–æ–º–æ–≥—É!",
                "difference": "–ë—ã—Å—Ç—Ä—ã–µ —É–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–∏–≤–∫–∏"
            }
        ],
        "description": "–ö–∏–≤–Ω–∏—Ç–µ –≥–æ–ª–æ–≤–æ–π –≤–Ω–∏–∑ 1-2 —Ä–∞–∑–∞. –ú–æ–∂–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç—å –∂–µ—Å—Ç–æ–º: –∫—É–ª–∞–∫ —Å –ø–æ–¥–Ω—è—Ç—ã–º –±–æ–ª—å—à–∏–º –ø–∞–ª—å—Ü–µ–º –≤–≤–µ—Ä—Ö (–∑–Ω–∞–∫ –æ–¥–æ–±—Ä–µ–Ω–∏—è).",
        "examples": [
            "–î–∞, —è —Å–æ–≥–ª–∞—Å–µ–Ω",
            "–î–∞, –∫–æ–Ω–µ—á–Ω–æ!",
            "–ü—Ä–∞–≤–∏–ª—å–Ω–æ!"
        ],
        "category": "–ë–∞–∑–æ–≤—ã–µ —Å–ª–æ–≤–∞",
        "difficulty": "–õ—ë–≥–∫–∏–π",
        "tips": "–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–∏–≤–æ–∫ –∫–∞–∫ –≤ –æ–±—ã—á–Ω–æ–π –∂–∏–∑–Ω–∏. –ó—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç!",
        "common_mistakes": "–ù–µ –∫–∏–≤–∞—ë—Ç–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ä–∞–∑ ‚Äî 1-2 –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.",
        "gif_path": None
    },
    
    "–Ω–µ—Ç": {
        "gesture_name": "–ü–æ–∫–∞—á–∏–≤–∞–Ω–∏–µ –≥–æ–ª–æ–≤–æ–π",
        "main_meaning": "–ù–ï–¢",
        "alternative_meanings": [
            {
                "word": "–ù–ï –°–û–ì–õ–ê–°–ï–ù",
                "context": "–ù–µ—Å–æ–≥–ª–∞—Å–∏–µ",
                "example": "–Ø –Ω–µ —Å–æ–≥–ª–∞—Å–µ–Ω —Å —ç—Ç–∏–º",
                "difference": "–ë–æ–ª–µ–µ –º–µ–¥–ª–µ–Ω–Ω–æ–µ –ø–æ–∫–∞—á–∏–≤–∞–Ω–∏–µ"
            },
            {
                "word": "–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û",
                "context": "–£–∫–∞–∑–∞–Ω–∏–µ –Ω–∞ –æ—à–∏–±–∫—É",
                "example": "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç–∞–∫ –Ω–µ –¥–µ–ª–∞–µ—Ç—Å—è",
                "difference": "–ü–æ–∫–∞—á–∏–≤–∞–Ω–∏–µ + –ø–∞–ª–µ—Ü –∏–∑ —Å—Ç–æ—Ä–æ–Ω—ã –≤ —Å—Ç–æ—Ä–æ–Ω—É"
            },
            {
                "word": "–ù–ï–õ–¨–ó–Ø",
                "context": "–ó–∞–ø—Ä–µ—Ç",
                "example": "–ù–µ–ª—å–∑—è —Ç–∞–∫ –¥–µ–ª–∞—Ç—å!",
                "difference": "–≠–Ω–µ—Ä–≥–∏—á–Ω–æ–µ –ø–æ–∫–∞—á–∏–≤–∞–Ω–∏–µ + —Å—Ç—Ä–æ–≥–∞—è –º–∏–º–∏–∫–∞"
            }
        ],
        "description": "–ü–æ–∫–∞—á–∞–π—Ç–µ –≥–æ–ª–æ–≤–æ–π –∏–∑ —Å—Ç–æ—Ä–æ–Ω—ã –≤ —Å—Ç–æ—Ä–æ–Ω—É 2-3 —Ä–∞–∑–∞. –ú–æ–∂–Ω–æ —É—Å–∏–ª–∏—Ç—å –∂–µ—Å—Ç–æ–º: —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞–ª–µ—Ü –¥–≤–∏–≥–∞–µ—Ç—Å—è –∏–∑ —Å—Ç–æ—Ä–æ–Ω—ã –≤ —Å—Ç–æ—Ä–æ–Ω—É –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π.",
        "examples": [
            "–ù–µ—Ç, —è –Ω–µ –º–æ–≥—É",
            "–ù–µ—Ç, —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ",
            "–ù–µ–ª—å–∑—è!"
        ],
        "category": "–ë–∞–∑–æ–≤—ã–µ —Å–ª–æ–≤–∞",
        "difficulty": "–õ—ë–≥–∫–∏–π",
        "tips": "–ú–∏–º–∏–∫–∞ –≤–∞–∂–Ω–∞! –ü–æ–∫–∞–∂–∏—Ç–µ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ –Ω–∞ –ª–∏—Ü–µ.",
        "common_mistakes": "–ù–µ –∫–∏–≤–∞–π—Ç–µ –≤–≤–µ—Ä—Ö-–≤–Ω–∏–∑ ‚Äî —Ç–æ–ª—å–∫–æ –≤ —Å—Ç–æ—Ä–æ–Ω—ã!",
        "gif_path": None
    },
    
    "–ø–æ–Ω–∏–º–∞—é": {
        "gesture_name": "–†—É–∫–∞ –∫ –≥–æ–ª–æ–≤–µ —Å –∫–∏–≤–∫–æ–º",
        "main_meaning": "–ü–û–ù–ò–ú–ê–Æ",
        "alternative_meanings": [
            {
                "word": "–ü–û–ù–Ø–õ",
                "context": "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–Ω–∏–º–∞–Ω–∏—è",
                "example": "–ü–æ–Ω—è–ª, —Å–¥–µ–ª–∞—é",
                "difference": "–†–µ–∑–∫–æ–µ –∫–∞—Å–∞–Ω–∏–µ –ª–±–∞ + –∫–∏–≤–æ–∫"
            },
            {
                "word": "–Ø–°–ù–û",
                "context": "–ü–æ–Ω–∏–º–∞–Ω–∏–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è",
                "example": "–Ø—Å–Ω–æ, —Ç–µ–ø–µ—Ä—å –ø–æ–Ω—è—Ç–Ω–æ",
                "difference": "–õ–µ–≥–∫–æ–µ –∫–∞—Å–∞–Ω–∏–µ + —É–ª—ã–±–∫–∞"
            },
            {
                "word": "–î–û–ì–ê–î–ê–õ–°–Ø",
                "context": "–û—Å–æ–∑–Ω–∞–Ω–∏–µ",
                "example": "–ê, –¥–æ–≥–∞–¥–∞–ª—Å—è!",
                "difference": "–ü–∞–ª–µ—Ü –∫ –≤–∏—Å–∫—É + –∫–∏–≤–æ–∫"
            }
        ],
        "description": "–ö–æ—Å–Ω–∏—Ç–µ—Å—å —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø–∞–ª—å—Ü–µ–º –ª–±–∞ –∏–ª–∏ –≤–∏—Å–∫–∞ –∏ –∫–∏–≤–Ω–∏—Ç–µ –≥–æ–ª–æ–≤–æ–π. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è '–≤–æ—à–ª–∞ –≤ –≥–æ–ª–æ–≤—É'.",
        "examples": [
            "–ü–æ–Ω—è–ª, —Å–ø–∞—Å–∏–±–æ!",
            "–Ø—Å–Ω–æ, —Ç–µ–ø–µ—Ä—å –ø–æ–Ω—è—Ç–Ω–æ",
            "–ê, –¥–æ–≥–∞–¥–∞–ª—Å—è!"
        ],
        "category": "–ü–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –º—ã—à–ª–µ–Ω–∏–µ",
        "difficulty": "–õ—ë–≥–∫–∏–π",
        "tips": "–ö–∏–≤–æ–∫ –≥–æ–ª–æ–≤–æ–π —É—Å–∏–ª–∏–≤–∞–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ. –ó—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.",
        "common_mistakes": "–ù–µ –ø—É—Ç–∞–π—Ç–µ —Å –∂–µ—Å—Ç–æ–º '–¥—É–º–∞—Ç—å' (—Ç–∞–º –∫—Ä—É–≥–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è).",
        "gif_path": None
    },
    
    "–¥—É–º–∞—Ç—å": {
        "gesture_name": "–ö—Ä—É–≥–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è —É –≥–æ–ª–æ–≤—ã",
        "main_meaning": "–î–£–ú–ê–¢–¨",
        "alternative_meanings": [
            {
                "word": "–†–ê–ó–ú–´–®–õ–Ø–¢–¨",
                "context": "–ì–ª—É–±–æ–∫–æ–µ –æ–±–¥—É–º—ã–≤–∞–Ω–∏–µ",
                "example": "–Ø –¥–æ–ª–≥–æ —Ä–∞–∑–º—ã—à–ª—è–ª –Ω–∞–¥ —ç—Ç–∏–º",
                "difference": "–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∫—Ä—É–≥–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è"
            },
            {
                "word": "–°–û–û–ë–†–ê–ñ–ê–¢–¨",
                "context": "–£–º—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞",
                "example": "–ù—É–∂–Ω–æ —Å–æ–æ–±—Ä–∞–∂–∞—Ç—å –±—ã—Å—Ç—Ä–µ–µ",
                "difference": "–ë—ã—Å—Ç—Ä—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è —É –≤–∏—Å–∫–∞"
            },
            {
                "word": "–ú–û–ó–ì–ò (—Ä–∞–±–æ—Ç–∞—é—Ç)",
                "context": "–†–∞–∑–≥–æ–≤–æ—Ä–Ω–æ–µ",
                "example": "–£ –º–µ–Ω—è –º–æ–∑–≥–∏ –Ω–µ –≤–∞—Ä—è—Ç",
                "difference": "–ö—Ä—É–≥–∏ —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø–∞–ª—å—Ü–µ–º —É –≤–∏—Å–∫–∞"
            }
        ],
        "description": "–£–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–º –ø–∞–ª—å—Ü–µ–º –¥–µ–ª–∞–π—Ç–µ –∫—Ä—É–≥–æ–≤—ã–µ –¥–≤–∏–∂–µ–Ω–∏—è –æ–∫–æ–ª–æ –≤–∏—Å–∫–∞ –∏–ª–∏ –ª–±–∞. –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç '—Ä–∞–±–æ—Ç—É –º—ã—Å–ª–∏' –≤ –≥–æ–ª–æ–≤–µ.",
        "examples": [
            "–Ø –¥—É–º–∞—é –Ω–∞–¥ —ç—Ç–∏–º",
            "–î–∞–π –º–Ω–µ –ø–æ–¥—É–º–∞—Ç—å",
            "–ù–∞–¥–æ —Å–æ–æ–±—Ä–∞–∂–∞—Ç—å!"
        ],
        "category": "–ü–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –º—ã—à–ª–µ–Ω–∏–µ",
        "difficulty": "–°—Ä–µ–¥–Ω–∏–π",
        "tips": "–ú–∏–º–∏–∫–∞ –∑–∞–¥—É–º—á–∏–≤–æ—Å—Ç–∏. –ú–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤–≤–µ—Ä—Ö –∏–ª–∏ –≤ —Å—Ç–æ—Ä–æ–Ω—É.",
        "common_mistakes": "–ù–µ –ø—É—Ç–∞–π—Ç–µ —Å '–ø–æ–Ω–∏–º–∞—é' ‚Äî —Ç–∞–º –∫–∞—Å–∞–Ω–∏–µ –±–µ–∑ –∫—Ä—É–≥–æ–≤.",
        "gif_path": None
    },
    
    "—Ö–æ—Ä–æ—à–æ": {
        "gesture_name": "–ë–æ–ª—å—à–æ–π –ø–∞–ª–µ—Ü –≤–≤–µ—Ä—Ö",
        "main_meaning": "–•–û–†–û–®–û",
        "alternative_meanings": [
            {
                "word": "–û–¢–õ–ò–ß–ù–û",
                "context": "–í—ã—Å–æ–∫–∞—è –æ—Ü–µ–Ω–∫–∞",
                "example": "–û—Ç–ª–∏—á–Ω–æ —Å–¥–µ–ª–∞–Ω–æ!",
                "difference": "–≠–Ω–µ—Ä–≥–∏—á–Ω—ã–π –∂–µ—Å—Ç + —É–ª—ã–±–∫–∞"
            },
            {
                "word": "–û–ö / –û–ö–ï–ô",
                "context": "–°–æ–≥–ª–∞—Å–∏–µ, –æ–¥–æ–±—Ä–µ–Ω–∏–µ",
                "example": "–û–∫–µ–π, –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å",
                "difference": "–ö–æ–ª—å—Ü–æ –∏–∑ –ø–∞–ª—å—Ü–µ–≤ (–±–æ–ª—å—à–æ–π + —É–∫–∞–∑–∞—Ç–µ–ª—å–Ω—ã–π)"
            },
            {
                "word": "–ó–î–û–†–û–í–û",
                "context": "–í–æ—Å—Ö–∏—â–µ–Ω–∏–µ",
                "example": "–ó–¥–æ—Ä–æ–≤–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å!",
                "difference": "–ë–æ–ª—å—à–æ–π –ø–∞–ª–µ—Ü + –∫–∏–≤–∫–∏ –≥–æ–ª–æ–≤–æ–π"
            },
            {
                "word": "–ú–û–õ–û–î–ï–¶",
                "context": "–ü–æ—Ö–≤–∞–ª–∞",
                "example": "–ú–æ–ª–æ–¥–µ—Ü, –ø—Ä–∞–≤–∏–ª—å–Ω–æ!",
                "difference": "–ë–æ–ª—å—à–æ–π –ø–∞–ª–µ—Ü –≤–≤–µ—Ä—Ö + –ø–æ—Ö–ª–æ–ø—ã–≤–∞–Ω–∏–µ"
            }
        ],
        "description": "–°–æ–∂–º–∏—Ç–µ —Ä—É–∫—É –≤ –∫—É–ª–∞–∫, –±–æ–ª—å—à–æ–π –ø–∞–ª–µ—Ü –ø–æ–¥–Ω–∏–º–∏—Ç–µ –≤–≤–µ—Ä—Ö. –ñ–µ—Å—Ç —ç–Ω–µ—Ä–≥–∏—á–Ω—ã–π, —É–≤–µ—Ä–µ–Ω–Ω—ã–π. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∑–Ω–∞–∫ –æ–¥–æ–±—Ä–µ–Ω–∏—è.",
        "examples": [
            "–ö–∞–∫ –¥–µ–ª–∞? ‚Äî –•–æ—Ä–æ—à–æ!",
            "–û—Ç–ª–∏—á–Ω–æ, —Ç–∞–∫ –∏ —Å–¥–µ–ª–∞–µ–º",
            "–ó–¥–æ—Ä–æ–≤–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å!"
        ],
        "category": "–≠–º–æ—Ü–∏–∏ –∏ –æ—Ü–µ–Ω–∫–∏",
        "difficulty": "–õ—ë–≥–∫–∏–π",
        "tips": "–£–ª—ã–±–∫–∞ –¥–µ–ª–∞–µ—Ç –∂–µ—Å—Ç –¥—Ä—É–∂–µ–ª—é–±–Ω–µ–µ. –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–∏–≤–æ–∫.",
        "common_mistakes": "–ù–µ –æ–ø—É—Å–∫–∞–π—Ç–µ –ø–∞–ª–µ—Ü –≤–Ω–∏–∑ ‚Äî —Ç–æ–ª—å–∫–æ –≤–≤–µ—Ä—Ö –æ–∑–Ω–∞—á–∞–µ—Ç '—Ö–æ—Ä–æ—à–æ'!",
        "gif_path": None
    },
    
    "–ø–ª–æ—Ö–æ": {
        "gesture_name": "–ë–æ–ª—å—à–æ–π –ø–∞–ª–µ—Ü –≤–Ω–∏–∑",
        "main_meaning": "–ü–õ–û–•–û",
        "alternative_meanings": [
            {
                "word": "–£–ñ–ê–°–ù–û",
                "context": "–°–∏–ª—å–Ω–∞—è –Ω–µ–≥–∞—Ç–∏–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞",
                "example": "–£–∂–∞—Å–Ω–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å",
                "difference": "–†–µ–∑–∫–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ –≤–Ω–∏–∑ + –≥—Ä–∏–º–∞—Å–∞"
            },
            {
                "word": "–ù–ï –ù–†–ê–í–ò–¢–°–Ø",
                "context": "–ù–µ–æ–¥–æ–±—Ä–µ–Ω–∏–µ",
                "example": "–ú–Ω–µ —ç—Ç–æ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è",
                "difference": "–ü–æ–∫–∞—á–∏–≤–∞–Ω–∏–µ –≥–æ–ª–æ–≤–æ–π + –ø–∞–ª–µ—Ü –≤–Ω–∏–∑"
            },
            {
                "word": "–ü–†–û–í–ê–õ",
                "context": "–ù–µ—É–¥–∞—á–∞",
                "example": "–ü–æ–ª–Ω—ã–π –ø—Ä–æ–≤–∞–ª",
                "difference": "–ü–∞–ª–µ—Ü —Ä–µ–∑–∫–æ –≤–Ω–∏–∑ + –º–∏–º–∏–∫–∞ —Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏—è"
            }
        ],
        "description": "–°–æ–∂–º–∏—Ç–µ —Ä—É–∫—É –≤ –∫—É–ª–∞–∫, –±–æ–ª—å—à–æ–π –ø–∞–ª–µ—Ü –Ω–∞–ø—Ä–∞–≤—å—Ç–µ –≤–Ω–∏–∑. –ú–∏–º–∏–∫–∞ –Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–∞. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω—É—é –æ—Ü–µ–Ω–∫—É.",
        "examples": [
            "–î–µ–ª–∞ –ø–ª–æ—Ö–æ",
            "–≠—Ç–æ —É–∂–∞—Å–Ω–æ",
            "–ù–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –º–Ω–µ —ç—Ç–æ"
        ],
        "category": "–≠–º–æ—Ü–∏–∏ –∏ –æ—Ü–µ–Ω–∫–∏",
        "difficulty": "–õ—ë–≥–∫–∏–π",
        "tips": "–ú–∏–º–∏–∫–∞ –≤–∞–∂–Ω–∞ ‚Äî –ø–æ–∫–∞–∂–∏—Ç–µ –Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–æ –Ω–∞ –ª–∏—Ü–µ.",
        "common_mistakes": "–ù–µ –ø—É—Ç–∞–π—Ç–µ —Å –¥—Ä—É–≥–∏–º–∏ –∂–µ—Å—Ç–∞–º–∏ ‚Äî –ø–∞–ª–µ—Ü —Å—Ç—Ä–æ–≥–æ –≤–Ω–∏–∑.",
        "gif_path": None
    },
    
    "–ª—é–±–æ–≤—å": {
        "gesture_name": "–†—É–∫–∞ –∫ —Å–µ—Ä–¥—Ü—É",
        "main_meaning": "–õ–Æ–ë–û–í–¨",
        "alternative_meanings": [
            {
                "word": "–õ–Æ–ë–ò–¢–¨",
                "context": "–ì–ª–∞–≥–æ–ª, —á—É–≤—Å—Ç–≤–æ",
                "example": "–Ø —Ç–µ–±—è –ª—é–±–ª—é",
                "difference": "–ö—Ä—É–≥–æ–≤–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ —Ä—É–∫–æ–π –Ω–∞ —Å–µ—Ä–¥—Ü–µ"
            },
            {
                "word": "–ù–†–ê–í–ò–¢–¨–°–Ø (—Å–∏–ª—å–Ω–æ)",
                "context": "–°–∏–ª—å–Ω–∞—è —Å–∏–º–ø–∞—Ç–∏—è",
                "example": "–ú–Ω–µ —ç—Ç–æ –æ—á–µ–Ω—å –Ω—Ä–∞–≤–∏—Ç—Å—è",
                "difference": "–õ–µ–≥–∫–æ–µ –∫–∞—Å–∞–Ω–∏–µ + —É–ª—ã–±–∫–∞"
            },
            {
                "word": "–î–û–†–û–ì–û–ô",
                "context": "–û –±–ª–∏–∑–∫–æ–º —á–µ–ª–æ–≤–µ–∫–µ",
                "example": "–¢—ã –º–Ω–µ –æ—á–µ–Ω—å –¥–æ—Ä–æ–≥",
                "difference": "–†—É–∫–∞ –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–¥—Ü–µ"
            },
            {
                "word": "–î–£–®–ï–í–ù–´–ô",
                "context": "–û–± —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –±–ª–∏–∑–æ—Å—Ç–∏",
                "example": "–î—É—à–µ–≤–Ω—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä",
                "difference": "–ü–ª–∞–≤–Ω–æ–µ –∫—Ä—É–≥–æ–≤–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ"
            }
        ],
        "description": "–ü—Ä–∏–∂–º–∏—Ç–µ –ø—Ä–∞–≤—É—é —Ä—É–∫—É (–∏–ª–∏ –æ–±–µ —Ä—É–∫–∏) –∫ –≥—Ä—É–¥–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ —Å–µ—Ä–¥—Ü–∞. –ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –º—è–≥–∫–æ–µ –∫—Ä—É–≥–æ–≤–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ. –í—ã—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ —Ç—ë–ø–ª–æ–µ, –∏—Å–∫—Ä–µ–Ω–Ω–µ–µ.",
        "examples": [
            "–Ø —Ç–µ–±—è –ª—é–±–ª—é",
            "–õ—é–±–ª—é —Å–≤–æ—é —Å–µ–º—å—é",
            "–≠—Ç–æ –º–Ω–µ –ø–æ –¥—É—à–µ"
        ],
        "category": "–≠–º–æ—Ü–∏–∏ –∏ —á—É–≤—Å—Ç–≤–∞",
        "difficulty": "–°—Ä–µ–¥–Ω–∏–π",
        "tips": "–ò—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å ‚Äî –≥–ª–∞–≤–Ω–æ–µ. –ú–∏–º–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–µ–ø–ª–æ.",
        "common_mistakes": "–ù–µ –ø—É—Ç–∞–π—Ç–µ —Å '—Å–ø–∞—Å–∏–±–æ' ‚Äî —Ç–∞–º —Ä—É–∫–∞ –¥–≤–∏–∂–µ—Ç—Å—è –≤–ø–µ—Ä—ë–¥.",
        "gif_path": None
    }
}

# –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
CATEGORIES = {
    "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è": ["–ø—Ä–∏–≤–µ—Ç"],
    "–í–µ–∂–ª–∏–≤–æ—Å—Ç—å": ["—Å–ø–∞—Å–∏–±–æ", "–ø–æ–∂–∞–ª—É–π—Å—Ç–∞"],
    "–ë–∞–∑–æ–≤—ã–µ —Å–ª–æ–≤–∞": ["–¥–∞", "–Ω–µ—Ç"],
    "–ü–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –º—ã—à–ª–µ–Ω–∏–µ": ["–ø–æ–Ω–∏–º–∞—é", "–¥—É–º–∞—Ç—å"],
    "–≠–º–æ—Ü–∏–∏ –∏ –æ—Ü–µ–Ω–∫–∏": ["—Ö–æ—Ä–æ—à–æ", "–ø–ª–æ—Ö–æ"],
    "–≠–º–æ—Ü–∏–∏ –∏ —á—É–≤—Å—Ç–≤–∞": ["–ª—é–±–æ–≤—å"]
}

# –î–ª—è "—Å–ª–æ–≤–∞ –¥–Ω—è" ‚Äî –º–µ–Ω—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
def get_word_of_day():
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ª–æ–≤–æ –¥–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞—Ç—ã"""
    today = datetime.now().day
    words = list(GESTURES_DB.keys())
    index = today % len(words)
    return words[index]


# === –§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï –°–û–û–ë–©–ï–ù–ò–ô ===

def format_gesture_full(gesture_key):
    """–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∂–µ—Å—Ç–∞"""
    gesture = GESTURES_DB[gesture_key]
    
    message = f"ü§ü <b>{gesture['main_meaning']}</b>\n\n"
    message += f"‚úã <b>–ñ–µ—Å—Ç:</b> {gesture['gesture_name']}\n\n"
    
    # –û–ø–∏—Å–∞–Ω–∏–µ
    message += f"üìù <b>–ö–∞–∫ –ø–æ–∫–∞–∑–∞—Ç—å:</b>\n{gesture['description']}\n\n"
    
    # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    if gesture['alternative_meanings']:
        message += f"üí≠ <b>–î–†–£–ì–ò–ï –ó–ù–ê–ß–ï–ù–ò–Ø –≠–¢–û–ì–û –ñ–ï–°–¢–ê:</b>\n\n"
        for i, alt in enumerate(gesture['alternative_meanings'], 1):
            message += f"{i}Ô∏è‚É£ <b>{alt['word']}</b>\n"
            message += f"   üìå {alt['context']}\n"
            message += f"   üí¨ {alt['example']}\n"
            message += f"   üîç {alt['difference']}\n\n"
    
    # –ü—Ä–∏–º–µ—Ä—ã
    message += f"üí° <b>–ü—Ä–∏–º–µ—Ä—ã —Ñ—Ä–∞–∑:</b>\n"
    for example in gesture['examples']:
        message += f"‚Ä¢ {example}\n"
    
    message += f"\n‚ö†Ô∏è <b>–ß–∞—Å—Ç–∞—è –æ—à–∏–±–∫–∞:</b>\n{gesture['common_mistakes']}\n\n"
    message += f"üí° <b>–°–æ–≤–µ—Ç:</b> {gesture['tips']}\n\n"
    message += f"üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: {gesture['category']}\n"
    message += f"‚≠ê –°–ª–æ–∂–Ω–æ—Å—Ç—å: {gesture['difficulty']}"
    
    return message


def format_gesture_short(gesture_key):
    """–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∂–µ—Å—Ç–∞"""
    gesture = GESTURES_DB[gesture_key]
    
    message = f"ü§ü <b>{gesture['main_meaning']}</b>\n\n"
    message += f"‚úã {gesture['gesture_name']}\n\n"
    message += f"üìù {gesture['description'][:100]}...\n\n"
    message += f"üí≠ –¢–∞–∫–∂–µ: {', '.join([alt['word'] for alt in gesture['alternative_meanings'][:2]])}"
    
    return message


# === –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –ö–û–ú–ê–ù–î ===

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /start"""
    user = update.effective_user.first_name
    
    keyboard = [
        [InlineKeyboardButton("üìÖ –°–ª–æ–≤–æ –¥–Ω—è", callback_data='word_of_day')],
        [
            InlineKeyboardButton("üìö –ö–∞—Ç–µ–≥–æ—Ä–∏–∏", callback_data='categories'),
            InlineKeyboardButton("üîç –ü–æ–∏—Å–∫", callback_data='search')
        ],
        [
            InlineKeyboardButton("üìñ –í—Å–µ –∂–µ—Å—Ç—ã", callback_data='all_gestures'),
            InlineKeyboardButton("‚ùì –ü–æ–º–æ—â—å", callback_data='help')
        ]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    message = f"""üëã –ü—Ä–∏–≤–µ—Ç, {user}!

–Ø –ø–æ–º–æ–≥—É –∏–∑—É—á–∏—Ç—å <b>–†—É—Å—Å–∫–∏–π –∂–µ—Å—Ç–æ–≤—ã–π —è–∑—ã–∫</b>! ü§ü

üìö <b>–ù–∞ –æ—Å–Ω–æ–≤–µ —É—á–µ–±–Ω–∏–∫–æ–≤:</b>
‚Ä¢ –ò.–§. –ì–µ–π–ª—å–º–∞–Ω
‚Ä¢ –ê.–ï. –•–∞—Ä–ª–∞–º–µ–Ω–∫–æ–≤–∞

<b>–ß—Ç–æ —è —É–º–µ—é:</b>

üìÖ –°–ª–æ–≤–æ –¥–Ω—è ‚Äî –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –Ω–æ–≤—ã–π –∂–µ—Å—Ç
üìö –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Äî –∂–µ—Å—Ç—ã –ø–æ —Ç–µ–º–∞–º
üîç –ü–æ–∏—Å–∫ ‚Äî –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π –∂–µ—Å—Ç
üí≠ –í–∞—Ä–∏–∞–Ω—Ç—ã –∑–Ω–∞—á–µ–Ω–∏–π ‚Äî –æ–¥–∏–Ω –∂–µ—Å—Ç, –º–Ω–æ–≥–æ —Å–º—ã—Å–ª–æ–≤

<b>–í—ã–±–µ—Ä–∏ —á—Ç–æ —Ö–æ—á–µ—à—å –∏–∑—É—á–∏—Ç—å:</b>"""
    
    await update.message.reply_text(
        message,
        reply_markup=reply_markup,
        parse_mode='HTML'
    )


async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /help"""
    message = """üìö <b>–ö–ê–ö –ü–û–õ–¨–ó–û–í–ê–¢–¨–°–Ø –ë–û–¢–û–ú</b>

<b>–ö–æ–º–∞–Ω–¥—ã:</b>
/start - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
/word - —Å–ª–æ–≤–æ –¥–Ω—è
/help - —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞

<b>–ö–Ω–æ–ø–∫–∏:</b>
üìÖ –°–ª–æ–≤–æ –¥–Ω—è - –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –∂–µ—Å—Ç
üìö –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ - –∂–µ—Å—Ç—ã –ø–æ —Ç–µ–º–∞–º
üîç –ü–æ–∏—Å–∫ - –Ω–∞–π—Ç–∏ –∂–µ—Å—Ç –ø–æ —Å–ª–æ–≤—É
üìñ –í—Å–µ –∂–µ—Å—Ç—ã - –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫

<b>–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:</b>
‚Ä¢ –û—Å–Ω–æ–≤–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∂–µ—Å—Ç–∞
‚Ä¢ –î—Ä—É–≥–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —ç—Ç–æ–≥–æ –∂–µ –∂–µ—Å—Ç–∞
‚Ä¢ –ö–∞–∫ —Ä–∞–∑–ª–∏—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è
‚Ä¢ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
‚Ä¢ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚Ä¢ –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏
‚Ä¢ –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

<b>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∂–µ—Å—Ç–æ–≤:</b>
‚Ä¢ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
‚Ä¢ –í–µ–∂–ª–∏–≤–æ—Å—Ç—å
‚Ä¢ –ë–∞–∑–æ–≤—ã–µ —Å–ª–æ–≤–∞
‚Ä¢ –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∏ –º—ã—à–ª–µ–Ω–∏–µ
‚Ä¢ –≠–º–æ—Ü–∏–∏ –∏ –æ—Ü–µ–Ω–∫–∏
‚Ä¢ –≠–º–æ—Ü–∏–∏ –∏ —á—É–≤—Å—Ç–≤–∞

üí° <b>–°–æ–≤–µ—Ç:</b> –ò–∑—É—á–∞–π—Ç–µ –ø–æ 1-2 –∂–µ—Å—Ç–∞ –≤ –¥–µ–Ω—å, –ø—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ –ø–µ—Ä–µ–¥ –∑–µ—Ä–∫–∞–ª–æ–º!"""
    
    await update.message.reply_text(message, parse_mode='HTML')


async def word_of_day_command(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–ö–æ–º–∞–Ω–¥–∞ /word - –ø–æ–∫–∞–∑–∞—Ç—å —Å–ª–æ–≤–æ –¥–Ω—è"""
    word = get_word_of_day()
    message = f"üìÖ <b>–°–õ–û–í–û –î–ù–Ø</b>\n\n{format_gesture_full(word)}"
    
    keyboard = [
        [InlineKeyboardButton("üîÑ –°–ª—É—á–∞–π–Ω—ã–π –∂–µ—Å—Ç", callback_data='random_gesture')],
        [InlineKeyboardButton("‚óÄÔ∏è –í –º–µ–Ω—é", callback_data='back')]
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    
    await update.message.reply_text(
        message,
        reply_markup=reply_markup,
        parse_mode='HTML'
    )


# === –û–ë–†–ê–ë–û–¢–ß–ò–ö –ö–ù–û–ü–û–ö ===

async def button_handler(update: Update, context: ContextTypes.DEFAULT_TYPE):
    """–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏"""
    query = update.callback_query
    await query.answer()
    
    if query.data == 'word_of_day':
        word = get_word_of_day()
        message = f"üìÖ <b>–°–õ–û–í–û –î–ù–Ø</b>\n\n{format_gesture_full(word)}"
        
        keyboard = [
            [InlineKeyboardButton("üîÑ –°–ª—É—á–∞–π–Ω—ã–π –∂–µ—Å—Ç", callback_data='random_gesture')],
            [InlineKeyboardButton
